var O=Object.defineProperty;var U=Object.getOwnPropertyDescriptor;var L=Object.getOwnPropertyNames;var v=Object.prototype.hasOwnProperty;var $=(t,e)=>{for(var n in e)O(t,n,{get:e[n],enumerable:!0})},j=(t,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of L(e))!v.call(t,a)&&a!==n&&O(t,a,{get:()=>e[a],enumerable:!(o=U(e,a))||o.enumerable});return t};var H=t=>j(O({},"__esModule",{value:!0}),t);var X={};$(X,{generateContent:()=>Q});module.exports=H(X);function b(t,e="EN"){if(t===void 0)return"";let n={};if(typeof t=="string"&&Number.isNaN(Number(t)))return t;if(typeof t=="string"){let o=t.includes(".")?t.split(".").at(-1).length:0;n.minimumFractionDigits=o,t=Number(t)}else n.maximumSignificantDigits=6;return new Intl.NumberFormat(e,n).format(t)}function T(t,e,n={}){return t.length===e?t:(t.push(n),T(t,e,n))}var c=t=>Array(t).fill({}),i={hLineWidth:function(){return 0},vLineWidth:function(){return 0}};function h(t,e,n="EN"){let o;switch(e){case"number":o=b(Number(t));break;case"date":o=g(t,n);break;case"date-time":o=g(t,n);break;default:o=t}return o}function g(t,e="EN"){let n=new Date(t),o={year:"numeric",month:"numeric",day:"numeric"};return new Intl.DateTimeFormat(e,o).format(n)}function k(t){return{style:"table",margin:[0,50,0,0],table:{widths:[280,250],body:[[{text:[{text:"Data schema maintained by ",style:"normal",margin:[0,0,0,0]},{text:"Material Identity",style:"normal",color:"blue",margin:[0,0,0,0],decoration:"underline",link:"https://materialidentity.org"},{text:".",style:"normal",margin:[0,0,0,0]}]},{text:t,style:"small",color:"#000",margin:[0,0,0,0],alignment:"right"}]]},layout:i}}var N=class{constructor(e,n,o=["EN"],a={}){this.translations=e;this.extraTranslations=n;this.languages=o;this.languageFontMap=a}getField(e,n,o){let a=this.translations;return typeof a=="object"&&e in a&&n in a[e]&&o in a[e][n]?a[e][n][o]:""}getTranslation(e,n){let o=this.languages.map(a=>{let s=this.languageFontMap[a];return{text:this.getField(a,e,n),font:s}});if(o.length===2){let a={text:" / ",font:void 0};o.splice(1,0,a)}return o}translate(e,n){return n==="certificateFields"?[{text:`${e} `},...this.getTranslation(n,e)]:this.getTranslation(n,e)}extraTranslate(e,n,o,a){return this.getExtraTranslation(e,n,o,a)}getExtraTranslation(e,n,o,a){let s=this.languages.map(r=>{let y=this.languageFontMap[r];return{text:this.getExtraField(e,r,n,o)||a,font:y}});if(s[0]?.text===s[1]?.text||s[0]?.text&&!s[1]?.text)return[s[0]];if(s.length===2){let r={text:" / ",font:void 0};s.splice(1,0,r)}return s}isExtraTranslation(e,n,o,a,s){return e&&typeof e=="string"&&typeof s=="object"&&s!==null&&s[e]&&typeof s[e]=="object"&&s[e]!==null&&n in s[e]&&o&&typeof o=="string"&&typeof s[e][n]=="object"&&s[e][n]!==null&&o in s[e][n]&&a&&typeof a=="string"&&typeof s[e][n][o]=="object"&&s[e][n][o]!==null&&a in s[e][n][o]}getExtraField(e,n,o,a){return this.isExtraTranslation(e,n,o,a,this.extraTranslations)?this.extraTranslations[e][n][o][a]:""}};var f=(t,e,n=3)=>{let o=Object.keys(t).map(a=>{let{Interpretation:s,Key:r,Value:y,Type:l,Unit:m}=t[a],p=n-3,C=[{text:`${a} ${r}`,style:"tableHeader",colSpan:n-2},{text:`${h(y,l,e.languages[0])} ${m||""}`,style:"p",colSpan:1},{text:s||"",style:"p",colSpan:1}];return p>0&&c(p).forEach((D,R)=>{C.splice(1+R,0,D)}),C});return o?.length?[[{text:e.translate("SupplementaryInformation","otherFields"),style:"h5",colSpan:n},...c(n-1)],...o]:[]};function E(t,e){let n=["A01","A04","A06","A06.1","A06.2","A06.3","SupplementaryInformation"],o=Object.keys(t).filter(s=>!n.includes(s)).map(s=>[{text:e.translate(s,"certificateFields"),style:"tableHeader",colSpan:3},{},{},{text:t[s],style:"p"}]),a=t.SupplementaryInformation?f(t.SupplementaryInformation,e,4):c(4);return[{text:e.translate("CommercialTransaction","certificateGroups"),style:"h2",margin:[0,0,0,4]},{canvas:[{type:"line",x1:0,y1:0,x2:550,y2:0,lineWidth:1}]},{style:"table",id:"CommercialTransaction",table:{widths:[160,"*","*",300],body:o},layout:i},{style:"table",table:{widths:[160,"*",160,130],body:a},layout:i}]}function d(t,e,n){if(!t)return[];let{Property:o,Value:a,Minimum:s,Maximum:r,Unit:y}=t;return[[{text:[{text:n.translate(e,"certificateFields")},{text:` ${o||""}`}],style:"tableHeader"},{},{},{alignment:"justify",columns:[{text:`${b(a,n.languages[0])} ${y||""}`,style:"p"},{text:s?`min ${b(s,n.languages[0])} ${y}`:"",style:"p"},{text:r?`max ${b(r,n.languages[0])} ${y}`:"",style:"p"}]}]]}function I(t,e,n){return t?.length?[[{text:n.translate(e,"certificateFields"),style:"tableHeader"},{},{},{text:`${t.map(({Value:o})=>b(o,n.languages[0])).join(", ")} ${t[0]?.Unit||""}`,style:"p"}]]:[]}function S(t,e){if(!t)return[{style:"table",id:"Inspection",table:{widths:[160,"*","*",300],body:[c(4)]},layout:i}];let n=[];if(Array.isArray(t))t.forEach(o=>{let a=P(o,e);n.push(...a)});else{let o=P(t,e);n.push(...o)}return n}function P(t,e){let n=["C00","C01","C02","C03"],o=Object.keys(t).filter(p=>n.includes(p)&&t[p]).map(p=>[{text:e.translate(p,"certificateFields"),style:"tableHeader",colSpan:3},{},{},{text:t[p],style:"p"}]),a=t.SupplementaryInformation?f(t.SupplementaryInformation,e,4):[],s=t.TensileTest?K(t.TensileTest,e):[],r=t.HardnessTest?_(t.HardnessTest,e):[],y=t.NotchedBarImpactTest?W(t.NotchedBarImpactTest,e):[],l=t.OtherMechanicalTests?G(t.OtherMechanicalTests,e):[],m=t.ChemicalComposition?z(t.ChemicalComposition,e):[];return[{text:e.translate("Inspection","certificateGroups"),style:"h2",margin:[0,0,0,4]},{canvas:[{type:"line",x1:0,y1:0,x2:550,y2:0,lineWidth:1}]},{id:"Inspection",style:"table",table:{widths:[160,"*","*",300],body:o},layout:i},a.length>0?{style:"table",table:{widths:[160,"*",160,130],body:a},layout:i}:{},...s,...r,...y,...l,...m]}function K(t,e){let n=t.C10?[{text:e.translate("C10","certificateFields"),style:"tableHeader"},{},{},{text:t.C10,style:"p"}]:c(4),a=["C11","C12","C13"].filter(r=>t[r]).map(r=>d(t[r],r,e)[0]||[]),s=t.SupplementaryInformation?f(t.SupplementaryInformation,e,4):[[{text:"",colSpan:4},{},{},{}]];return[{text:e.translate("TensileTest","otherFields"),style:"h4"},{canvas:[{type:"line",x1:0,y1:0,x2:550,y2:0,lineWidth:.5}]},{style:"table",id:"TensileTest",table:{widths:[160,"*","*",300],body:[n,...a]},layout:i},{style:"table",id:"TensileTest",table:{widths:[160,"*",160,130],body:s},layout:i}]}function _(t,e){let n=t.C30?[{text:e.translate("C30","certificateFields"),style:"tableHeader"},{},{},{text:t.C30,style:"p"}]:c(4),o=t.C31?I(t.C31,"C31",e):[],a=t.C32?d(t.C32,"C32",e):[],s=t.SupplementaryInformation?f(t.SupplementaryInformation,e,4):[[{text:"",colSpan:4},{},{},{}]];return[{text:e.translate("HardnessTest","otherFields"),style:"h4"},{canvas:[{type:"line",x1:0,y1:0,x2:550,y2:0,lineWidth:.5}]},{style:"table",table:{widths:[160,"*","*",300],body:[n,...o,...a]},layout:i},{style:"table",table:{widths:[160,"*",160,130],body:s},layout:i}]}function W(t,e){let n=t.C40?[{text:e.translate("C40","certificateFields"),style:"tableHeader"},{},{},{text:t.C40,style:"p"}]:c(4),o=t.C41?d(t.C41,"C41",e):[],a=t.C42?I(t.C42,"C42",e):[],s=t.C43?d(t.C43,"C43",e):[],r=t.SupplementaryInformation?f(t.SupplementaryInformation,e,4):[[{text:"",colSpan:4},{},{},{}]];return[{text:e.translate("NotchedBarImpactTest","otherFields"),style:"h4"},{canvas:[{type:"line",x1:0,y1:0,x2:550,y2:0,lineWidth:.5}]},{style:"table",table:{widths:[160,"*","*",300],body:[n,...o,...a,...s]},layout:i},{style:"table",table:{widths:[160,"*",160,130],body:r},layout:i}]}function G(t,e){let n=Object.keys(t).map(o=>{let{Key:a,Value:s,Unit:r}=t[o];return[{text:`${o} ${a}`,style:"p"},{},{},{text:s?`${s} ${r||""}`:"",style:"p"}]});return[{text:e.translate("OtherMechanicalTests","otherFields"),style:"h4"},{canvas:[{type:"line",x1:0,y1:0,x2:550,y2:0,lineWidth:.5}]},{style:"table",table:{widths:[160,"*","*",300],body:n},layout:i}]}function Z(t,e,n=15){let o=Object.keys(t).filter(r=>r!=="C70"&&r!=="SupplementaryInformation").map(r=>({key:r,value:t[r]})),a=new Array(Math.ceil(o.length/n)).fill("").map(()=>o.splice(0,n)),s=[-2,2,-2,2];return a.map(r=>{let y=[[{text:"",style:"p"},...r.map(l=>({text:l.key,style:"p",margin:s}))],[{text:"Symbol",style:"p"},...r.map(l=>({text:l.value.Symbol,style:"p",margin:s}))],[{text:"Actual [%]",style:"p"},...r.map(l=>({text:b(l.value.Actual,e.languages[0]),style:"caption",margin:s}))]];if(r.some(l=>Object.prototype.hasOwnProperty.call(l.value,"Minimum"))){let l=[{text:"Minimum",style:"p"},...r.map(m=>({text:m.value?.Minimum?b(m.value.Minimum,e.languages[0]):"",style:"caption",margin:s}))];y.push(l)}if(r.some(l=>Object.prototype.hasOwnProperty.call(l.value,"Maximum"))){let l=[{text:"Maximum",style:"p"},...r.map(m=>({text:m.value?.Maximum?b(m.value.Maximum,e.languages[0]):"",style:"caption",margin:s}))];y.push(l)}return{style:"table",table:{widths:new Array(r.length+1).fill("").map((l,m)=>m===0?45:25),body:y},layout:i}})}function z(t,e){let n=t.C70?[{text:e.translate("C70","certificateFields"),style:"tableHeader"},{},{},{text:t.C70,style:"p"}]:c(4),o=Z(t,e),a=t.SupplementaryInformation?f(t.SupplementaryInformation,e,4):[[{text:"",colSpan:4},{},{},{}]];return[{text:e.translate("ChemicalComposition","otherFields"),style:"h4"},{canvas:[{type:"line",x1:0,y1:0,x2:550,y2:0,lineWidth:.5}]},{style:"table",table:{widths:[160,"*","*",300],body:[n]},layout:i},...o,{style:"table",table:{widths:[160,"*",160,130],body:a},layout:i}]}function M(t,e){if(!t)return[{style:"table",id:"OtherTests",table:{widths:[160,"*","*",300],body:[c(4)]},layout:i}];let n=t.D01?[{text:e.translate("D01","certificateFields"),style:"tableHeader",colSpan:3},{},{},{text:t.D01,style:"p"}]:c(4),o=t.NonDestructiveTests?F(t.NonDestructiveTests,e,"NonDestructiveTests",4):[],a=t.OtherProductTests?F(t.OtherProductTests,e,"OtherProductTests",4):[];return[{text:e.translate("OtherTests","certificateGroups"),style:"h2",margin:[0,0,0,4]},{canvas:[{type:"line",x1:0,y1:0,x2:550,y2:0,lineWidth:1}]},{style:"table",id:"OtherTests",table:{widths:[160,"*","*",300],body:[n]},layout:i},...o,...a]}var F=(t,e,n,o=4)=>{let a=Object.keys(t).map(s=>{let{Interpretation:r,Key:y,Value:l,Type:m,Unit:p}=t[s];return[{text:`${s} ${y}`,style:"tableHeader",colSpan:o-2},...c(o-3),{text:`${h(l,m,e.languages[0])} ${p||""}`,style:"p",colSpan:1},{text:r||"",style:"p",colSpan:1}]});return a?.length?[{text:e.translate(n,"otherFields"),style:"h4"},{canvas:[{type:"line",x1:0,y1:0,x2:550,y2:0,lineWidth:.5}]},{style:"table",table:{widths:[160,"*",160,130],body:a},layout:i}]:[]};function Y(t,e){let n=[{text:e.translate("B02","certificateFields"),colSpan:4,style:"tableHeader"},{},{},{}],o=Object.keys(t).map(a=>[{text:e.translate(a,"otherFields"),style:"caption",colSpan:3},{},{},{text:t[a].join(", "),style:"p"}]);return[n,...o]}function q(t,e){if(!t)return[];let n=[{text:e.translate("B09","certificateFields"),style:"tableHeader",colSpan:4},{},{},{}],o=Object.keys(t).filter(a=>a.toLowerCase()!=="unit").map(a=>[{text:e.translate(a,"otherFields"),style:"caption",colSpan:3},{},{},{text:a==="Form"?e.translate(t[a],"otherFields"):`${t[a]} ${t.Unit||""}`,style:"p"}]);return[n,...o]}function w(t,e){if(typeof t.B02=="string")return null;let n=Y(t.B02,e),o=["B01","B02","B09","B10","B11","B12","B12","B13","SupplementaryInformation"],a=Object.keys(t).filter(C=>!o.includes(C)).map(C=>[{text:e.translate(C,"certificateFields"),style:"tableHeader",colSpan:3},{},{},{text:t[C],style:"p"}]),s=q(t.B09,e),r=d(t.B10,"B10",e),y=d(t.B11,"B11",e),l=d(t.B12,"B12",e),m=d(t.B13,"B13",e),p=t.SupplementaryInformation?f(t.SupplementaryInformation,e,4):c(4);return[{text:e.translate("ProductDescription","certificateGroups"),style:"h2",margin:[0,0,0,4]},{canvas:[{type:"line",x1:0,y1:0,x2:550,y2:0,lineWidth:1}]},{style:"table",id:"ProductDescription",table:{widths:[160,"*","*",300],body:[[{text:e.translate("B01","certificateFields"),style:"tableHeader",colSpan:3},{},{},{text:t.B01,style:"p"}],...n,...a,...s,...r,...y,...l,...m]},layout:i},{style:"table",id:"ProductDescription",table:{widths:[160,"*",160,130],body:p},layout:i}]}function J(t,e){let n=t.A04?[[{text:e.translate("A04","certificateFields"),style:"tableHeader"}]]:[],o=t.A04?[[{image:t.A04,width:150}]]:[],a=["A01","A06","A06.1","A06.2","A06.3"],s=Object.keys(t).filter(l=>a.includes(l)),r=s.map(l=>[{text:e.translate(l,"certificateFields"),style:"tableHeader"}]),y=s.map(l=>[{text:t[l].CompanyName||t[l].Name,style:"p"},Array.isArray(t[l].Street)?t[l].Street.map(m=>({text:m,style:"p"})):{text:t[l].Street,style:"p"},{text:`${t[l].City},${t[l].ZipCode},${t[l].Country}`,style:"p"},t[l].Email?{text:t[l].Email,style:"p"}:void 0].filter(Boolean));return[[...n,...r],[...o,...y]]}function A(t){return[[t.slice(0,3)],[T([...t.slice(3,t.length)],3,"")]]}function V(t,e){let[n,o]=J(t,e);if(n?.length<=3){let y=[T(n,3,""),T(o,3,"")];return{style:"table",table:{widths:[200,150,150],body:y},layout:i}}let a=A(n),s=A(o),r=[...a[0],...s[0],...a[1],...s[1]];return{style:"table",table:{widths:[200,150,150],body:r},layout:i}}function B(t,e){let n=t.SupplementaryInformation?f(t.SupplementaryInformation,e,3):[[{text:"",colSpan:3},{},{}]],o=[{style:"table",table:{widths:[160,"*",180],body:[[{text:e.translate("Z01","certificateFields"),style:"tableHeader",colSpan:2},{},{text:t.Z01,style:"p"}],[{text:e.translate("Z02","certificateFields"),style:"tableHeader",colSpan:2},{},{text:g(t.Z02,e.languages[0]),style:"p"}],[{text:e.translate("Z03","certificateFields"),style:"tableHeader",colSpan:2},{},{text:t?.Z03,style:"p"}]]},layout:i}];if(t.Z04&&typeof t.Z04!="string"){let a={width:100,style:"table",table:{body:[[{image:t.Z04.CE_Image}],[{text:t.Z04.NotifiedBodyNumber,alignment:"center",bold:!0,style:"caption"}],[{text:t.Z04.DoCYear,alignment:"center",bold:!0,style:"caption"}],[{text:t.Z04.DoCNumber,alignment:"center",bold:!0,style:"caption"}]]},layout:i};o.push(a)}return[{text:e.translate("Validation","certificateGroups"),style:"h2",margin:[0,0,0,4]},{canvas:[{type:"line",x1:0,y1:0,x2:550,y2:0,lineWidth:1}]},{columns:o},{style:"table",table:{widths:[160,"*",300],body:n},layout:i}]}function Q(t,e,n={}){let o=new N(e,{},t.Certificate.CertificateLanguages,n),a=V(t.Certificate.CommercialTransaction,o),s=E(t.Certificate.CommercialTransaction,o),r=w(t.Certificate.ProductDescription,o)||[],y=S(t.Certificate.Inspection,o),l=M(t.Certificate.OtherTests,o),m=B(t.Certificate.Validation,o),p=k(t.RefSchemaUrl);return[a,...s,...r,...y,...l,...m,p]}0&&(module.exports={generateContent});
//! TODO: create standard function signature!!!!
